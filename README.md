# Laravel Cache Class

- [Introduction](#introduction)
- [Instalation](#instalation)
- [Generating Cache Classes](#generating-cache-classes)
- [Cache Class Conventions](#cache-class-conventions)
    - [Source data method](#source-data-method)
    - [Cache keys](#cache-keys)
- [Cache Class Usage](#cache-class-usage)
    - [Retrieving Data From Cache](#retrieving-data-from-cache)
    - [Refresh Data In Cache](#refresh-data-in-cache)

<a name="introduction"></a>
## Introduction

> Laravel provides an expressive, unified API for various cache backends, allowing you to take advantage of their blazing fast data retrieval and speed up your web application.

This package provides a better developer experience when your cached data is fetched or generated in different places in your code.

<a name="instalation"></a>
## Instalation

You can easily use this package in a your Laravel project:

1. Require the package in the local Laravel project:

```
composer require kamilmakosa/laravel-cache-class
```

<a name="generating-cache-classes"></a>
## Generating Cache Classes

To get started, let's create an Cache Class, that typically lives in the `app\Caches` directory and extend the `KamilMakosa\CacheClass\CacheClass` class. You may use the `make:cache` Artisan command to generate a new Cache Class:

```shell
php artisan make:cache FlightCache
```

<a name="cache-class-conventions"></a>
## Cache Class Conventions

Cache class generated by the `make:cache` command will be placed in the `app/Caches` directory. Let's examine a basic cache class and discuss some about this:

```php
<?php

namespace App\Caches;

use KamilMakosa\CacheClass\CacheClass;

class FlightCache extends CacheClass
{
    /**
    * Create a new CacheClass instance.
    *
    * @return void
    */
    public function __construct()
    {
        //
    }

    /**
     * Prepare data for cache.
     *
     * @return mixin
     */
    public function data()
    {
        // return
    }
}
```

<a name="source-data-method"></a>
### Source data method

After glancing at the example above, that function `data()` is empty. This method is source of data for cache class and is called when data expired or cache is empty.

```php
    use App\Models\Flight;

    class FlightCache extends CacheClass
    {
        public function data()
        {
            return Flight::where('active', 1)->get();
        }
    }
```

<a name="cache-keys"></a>
### Cache keys

By default, each cache class will automatically set the key under which data will be cached, based on the name of the class. If necessary, you may define a protected static `$key` property on your cache class to specify a different key that serves for cache data stored:

```php
    class FlightCache extends CacheClass
    {
        /**
         * @var string
         */
        protected static $key = 'active_flights';
    }
```

<a name="cache-class-usage"></a>
## Cache Class Usage

<a name="retrieving-data-from-cache"></a>
### Retrieving Data From Cache

Method `get` of your Cache Class is used to retrieve items from the cache.

```php
    use App\Caches\FlightCache;

    $value = FlightCache::get();
```

If the data does not exist in the cache, Cache Class auto renew data in cache, so you musn't call another method to verify is cache exists.

<a name="refresh-data-in-cache"></a>
### Refresh Data In Cache

You may refresh data in your Cache Class manually:

```php
    use App\Caches\FlightCache;

    $value = FlightCache::refresh();
```

Default, data in your Cache Class are stored forever. You may pass optional parameter to expiration time.

```php
    use App\Caches\FlightCache;

    $seconds = 10;
    $value = FlightCache::refresh($seconds);
```

```php
    use App\Caches\FlightCache;

    $seconds = 3600;
    $value = FlightCache::refresh($seconds);
```
